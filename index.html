<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<title>ã†ã•ãƒ¯ãƒ‹ãƒ•ãƒ«ãƒ¼ãƒ„ã‚­ãƒ£ãƒƒãƒ</title>
<style>
    body {
        margin: 0;
        background: #000;
        overflow: hidden;
        font-family: sans-serif;
        color: white;
    }

    #player {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        width: 80px;
        height: 80px;
        background: #77ff88; /* ãƒ¯ãƒ‹ã£ã½ã„è‰² */
        border-radius: 20px;
        text-align: center;
        line-height: 80px;
        font-size: 20px;
    }

    .fruit {
        position: absolute;
        width: 40px;
        height: 40px;
        background: #ffdd55;
        border-radius: 50%;
    }

    .bomb {
        position: absolute;
        width: 40px;
        height: 40px;
        background: red;
        border-radius: 50%;
    }

    #score, #timer {
        position: absolute;
        top: 10px;
        left: 10px;
        font-size: 24px;
    }
    #timer {
        left: auto;
        right: 10px;
    }
</style>
</head>

<body>

<div id="player">ğŸŠ</div>
<div id="score">ã‚¹ã‚³ã‚¢ï¼š0</div>
<div id="timer">æ®‹ã‚Šï¼š30ç§’</div>

<script>
    const player = document.getElementById("player");
    let score = 0;
    let time = 30;

    // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ“ä½œï¼ˆæŒ‡/ãƒã‚¦ã‚¹ã§ç§»å‹•ï¼‰
    document.addEventListener("mousemove", (e) => {
        player.style.left = e.clientX - 40 + "px";
    });
    document.addEventListener("touchmove", (e) => {
        let x = e.touches[0].clientX;
        player.style.left = x - 40 + "px";
    });

    // è½ã¡ç‰©ç”Ÿæˆ
    function spawnItem() {
        const isBomb = Math.random() < 0.2; // 20% ãŒçˆ†å¼¾
        const item = document.createElement("div");

        item.className = isBomb ? "bomb" : "fruit";
        item.style.left = Math.random() * window.innerWidth + "px";
        item.style.top = "0px";
        document.body.appendChild(item);

        let fall = setInterval(() => {
            const t = parseInt(item.style.top);
            item.style.top = t + 5 + "px";

            let iRect = item.getBoundingClientRect();
            let pRect = player.getBoundingClientRect();

            // å½“ãŸã‚Šåˆ¤å®š
            if (
                iRect.bottom >= pRect.top &&
                iRect.left < pRect.right &&
                iRect.right > pRect.left
            ) {
                clearInterval(fall);
                item.remove();

                if (isBomb) {
                    alert("çˆ†å¼¾ã«å½“ãŸã£ãŸï¼ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼\nã‚¹ã‚³ã‚¢ï¼š" + score);
                    location.reload();
                } else {
                    score++;
                    document.getElementById("score").innerText = "ã‚¹ã‚³ã‚¢ï¼š" + score;
                }
            }

            if (t > window.innerHeight) {
                clearInterval(fall);
                item.remove();
            }
        }, 20);
    }

    // å®šæœŸçš„ã«è½ã¨ã™
    setInterval(spawnItem, 600);

    // ã‚¿ã‚¤ãƒãƒ¼
    setInterval(() => {
        time--;
        document.getElementById("timer").innerText = "æ®‹ã‚Šï¼š" + time + "ç§’";
        if (time <= 0) {
            alert("çµ‚äº†ï¼ã‚¹ã‚³ã‚¢ï¼š" + score);
            location.reload();
        }
    }, 1000);
</script>

</body>
</html>
